<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>消息</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="no">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="renderer" content="webkit">
		<meta name="screen-orientation" content="portrait">
		<meta name="full-screen" content="yes">
		<meta name="x5-orientation" content="portrait">
		<meta name="x5-fullscreen" content="true">
		<meta name="format-detection" content="telephone=no, email=no">

		<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.0.js"></script>
		<script type="text/javascript" src="../static/lib/js/vue.min.js"></script>
		<script type="text/javascript" src="../static/lib/js/ydui.js"></script>
		<link rel="stylesheet" href="../css/mkui.css" />
		<link rel="stylesheet" href="../static/lib/css/ydui.rem.css" />
		<link rel="stylesheet" href="../static/css/common.css" />

		<link rel="stylesheet" href="../css/aui.css" />

		<style type="text/css">
			.chat_footer {
				width: 100%;
				position: fixed;
				background: #FCFCFC;
				bottom: 0;
				border-top: 1px solid #e1e3e5;
				left: 0;
			}
			
			.chat_ {
				display: block;
				height: 38px;
				margin: 6px;
			}
			
			.chat_ .chat_input {
				width: 78%;
				height: 100%;
				border: 1px solid #eee;
				background: #F5F5F5;
				border-radius: 4px;
				float: left;
				padding: 0 5px;
			}
		</style>
	</head>

	<body onload="window.scrollTo(0,document.body.scrollHeight);">
		<div id="app">
			<section id="chat">
				<li v-for="item in chatlist" class="aui-chat">
					<div class="aui-chat-header">{{item.created_at}}</div>
					<div v-if="item.is==0" class="aui-chat-item aui-chat-left">
						<div class="aui-chat-media">
							<img :src="item.avatar" />
						</div>
						<div class="aui-chat-inner">
							<div class="aui-chat-content">
								<div class="aui-chat-arrow"></div>
								{{item.content}}
							</div>
						</div>
					</div>
					<div v-else class="aui-chat-item aui-chat-right">
						<div class="aui-chat-media">
							<img :src="item.avatar" />
						</div>
						<div class="aui-chat-inner">
							<div class="aui-chat-content">
								<div class="aui-chat-arrow"></div>
								{{item.content}}
							</div>
							<div class="aui-chat-status"></div>
						</div>
					</div>
				</li>
			</section>
			<div class="clearfix" style="height:50px;"></div>
			<footer class="chat_footer">
				<div class="chat_">
					<input id="in" type="text" name="content" placeholder="说点什么吧" class="chat_input">
					<div style="height: 100%; width: 22%; float: right; display: flex;">
						<div id="send" class="aui-btn aui-btn-info" style="align-self: center; margin: auto; font-weight: bold;">发送</div>
					</div>
				</div>
			</footer>
		</div>
	</body>

	<script type="text/javascript">
		var vm = new Vue({
			el: '#app',
			data: {
				ok: true,
				chatlist: [{
					content: '123333333333',
					is: 0,
					avatar: '../static/img/touxiang.png',
					created_at: '09-11 18:08'
				}]
			}
		})

		var loc = location.href;
		var id = loc.split("=")[1];

		function scrollToEnd() { //滚动到底部
			var h = $('#chat').height() - $(window).height();
			$('#chat').scrollTop(h);
		}

		$('#send').click(function() {
			var v = $('#in').val();

			$('#chat').append('<li class="aui-chat"><div class="aui-chat-item aui-chat-right"><div class = "aui-chat-media"><img src = "../static/img/touxiang.png" /></div><div class = "aui-chat-inner"><div class = "aui-chat-content"><div class = "aui-chat-arrow"></div>' + v + '</div><div class = "aui-chat-status"></div></div></div></li>');

			$('#in').val("");

			window.scroll(0, document.body.scrollHeight);
		});
	</script>

</html>